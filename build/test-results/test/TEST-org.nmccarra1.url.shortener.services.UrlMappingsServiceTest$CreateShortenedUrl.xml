<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="UrlShortenerService.create" tests="2" skipped="0" failures="0" errors="0" timestamp="2021-05-31T13:11:38" hostname="Nialls-MacBook-Pro.local" time="0.015">
  <properties/>
  <testcase name="should throw an exception a new record is attempted to be created with an existing shortened url()" classname="org.nmccarra1.url.shortener.services.UrlMappingsServiceTest$CreateShortenedUrl" time="0.011"/>
  <testcase name="should create a shortened url for given url()" classname="org.nmccarra1.url.shortener.services.UrlMappingsServiceTest$CreateShortenedUrl" time="0.004"/>
  <system-out><![CDATA[{"timestamp":"2021-05-31T13:11:38.554Z","level":"WARN","thread":"DefaultDispatcher-worker-2 @coroutine#32","logger":"Exposed","message":"Transaction attempt #0 failed: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]. Statement(s): INSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?)","context":"default","exception":"org.jetbrains.exposed.exceptions.ExposedSQLException: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]\n\tat org.jetbrains.exposed.sql.statements.Statement.executeIn$exposed_core(Statement.kt:63)\n\tat org.jetbrains.exposed.sql.Transaction.exec(Transaction.kt:126)\n\tat org.jetbrains.exposed.sql.Transaction.exec(Transaction.kt:112)\n\tat org.jetbrains.exposed.sql.statements.Statement.execute(Statement.kt:29)\n\tat org.jetbrains.exposed.sql.QueriesKt.insert(Queries.kt:73)\n\tat org.nmccarra1.url.shortener.dao.UrlMappingsTable$insert$2.invoke(UrlMappingsTable.kt:32)\n\tat org.nmccarra1.url.shortener.dao.UrlMappingsTable$insert$2.invoke(UrlMappingsTable.kt:15)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2$1.invoke(MySqlConnectionProvider.kt:24)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2$1.invoke(MySqlConnectionProvider.kt:14)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$inTopLevelTransaction$1.invoke(ThreadLocalTransactionManager.kt:170)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$inTopLevelTransaction$2.invoke(ThreadLocalTransactionManager.kt:211)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.keepAndRestoreTransactionRefAfterRun(ThreadLocalTransactionManager.kt:219)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.inTopLevelTransaction(ThreadLocalTransactionManager.kt:210)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$transaction$1.invoke(ThreadLocalTransactionManager.kt:148)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.keepAndRestoreTransactionRefAfterRun(ThreadLocalTransactionManager.kt:219)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.transaction(ThreadLocalTransactionManager.kt:120)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.transaction(ThreadLocalTransactionManager.kt:118)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2.invokeSuspend(MySqlConnectionProvider.kt:23)\n\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:56)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:738)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:457)\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:427)\n\tat org.h2.message.DbException.get(DbException.java:205)\n\tat org.h2.message.DbException.get(DbException.java:181)\n\tat org.h2.index.BaseIndex.getDuplicateKeyException(BaseIndex.java:103)\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:220)\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:196)\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:546)\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:180)\n\tat org.h2.command.dml.Insert.update(Insert.java:132)\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:133)\n\tat org.h2.command.Command.executeUpdate(Command.java:267)\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:200)\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:154)\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n\tat org.jetbrains.exposed.sql.statements.jdbc.JdbcPreparedStatementImpl.executeUpdate(JdbcPreparedStatementImpl.kt:23)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.execInsertFunction(InsertStatement.kt:109)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.executeInternal(InsertStatement.kt:115)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.executeInternal(InsertStatement.kt:14)\n\tat org.jetbrains.exposed.sql.statements.Statement.executeIn$exposed_core(Statement.kt:61)\n\t... 23 common frames omitted\n","appVersion":"MISSING_APP_VERSION"}
{"timestamp":"2021-05-31T13:11:38.556Z","level":"WARN","thread":"DefaultDispatcher-worker-2 @coroutine#32","logger":"Exposed","message":"Transaction attempt #1 failed: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]. Statement(s): INSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?)","context":"default","exception":"org.jetbrains.exposed.exceptions.ExposedSQLException: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]\n\tat org.jetbrains.exposed.sql.statements.Statement.executeIn$exposed_core(Statement.kt:63)\n\tat org.jetbrains.exposed.sql.Transaction.exec(Transaction.kt:126)\n\tat org.jetbrains.exposed.sql.Transaction.exec(Transaction.kt:112)\n\tat org.jetbrains.exposed.sql.statements.Statement.execute(Statement.kt:29)\n\tat org.jetbrains.exposed.sql.QueriesKt.insert(Queries.kt:73)\n\tat org.nmccarra1.url.shortener.dao.UrlMappingsTable$insert$2.invoke(UrlMappingsTable.kt:32)\n\tat org.nmccarra1.url.shortener.dao.UrlMappingsTable$insert$2.invoke(UrlMappingsTable.kt:15)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2$1.invoke(MySqlConnectionProvider.kt:24)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2$1.invoke(MySqlConnectionProvider.kt:14)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$inTopLevelTransaction$1.invoke(ThreadLocalTransactionManager.kt:170)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$inTopLevelTransaction$2.invoke(ThreadLocalTransactionManager.kt:211)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.keepAndRestoreTransactionRefAfterRun(ThreadLocalTransactionManager.kt:219)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.inTopLevelTransaction(ThreadLocalTransactionManager.kt:210)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$transaction$1.invoke(ThreadLocalTransactionManager.kt:148)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.keepAndRestoreTransactionRefAfterRun(ThreadLocalTransactionManager.kt:219)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.transaction(ThreadLocalTransactionManager.kt:120)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.transaction(ThreadLocalTransactionManager.kt:118)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2.invokeSuspend(MySqlConnectionProvider.kt:23)\n\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:56)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:738)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:457)\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:427)\n\tat org.h2.message.DbException.get(DbException.java:205)\n\tat org.h2.message.DbException.get(DbException.java:181)\n\tat org.h2.index.BaseIndex.getDuplicateKeyException(BaseIndex.java:103)\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:220)\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:196)\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:546)\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:180)\n\tat org.h2.command.dml.Insert.update(Insert.java:132)\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:133)\n\tat org.h2.command.Command.executeUpdate(Command.java:267)\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:200)\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:154)\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n\tat org.jetbrains.exposed.sql.statements.jdbc.JdbcPreparedStatementImpl.executeUpdate(JdbcPreparedStatementImpl.kt:23)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.execInsertFunction(InsertStatement.kt:109)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.executeInternal(InsertStatement.kt:115)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.executeInternal(InsertStatement.kt:14)\n\tat org.jetbrains.exposed.sql.statements.Statement.executeIn$exposed_core(Statement.kt:61)\n\t... 23 common frames omitted\n","appVersion":"MISSING_APP_VERSION"}
{"timestamp":"2021-05-31T13:11:38.557Z","level":"WARN","thread":"DefaultDispatcher-worker-2 @coroutine#32","logger":"Exposed","message":"Transaction attempt #2 failed: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]. Statement(s): INSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?)","context":"default","exception":"org.jetbrains.exposed.exceptions.ExposedSQLException: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]\n\tat org.jetbrains.exposed.sql.statements.Statement.executeIn$exposed_core(Statement.kt:63)\n\tat org.jetbrains.exposed.sql.Transaction.exec(Transaction.kt:126)\n\tat org.jetbrains.exposed.sql.Transaction.exec(Transaction.kt:112)\n\tat org.jetbrains.exposed.sql.statements.Statement.execute(Statement.kt:29)\n\tat org.jetbrains.exposed.sql.QueriesKt.insert(Queries.kt:73)\n\tat org.nmccarra1.url.shortener.dao.UrlMappingsTable$insert$2.invoke(UrlMappingsTable.kt:32)\n\tat org.nmccarra1.url.shortener.dao.UrlMappingsTable$insert$2.invoke(UrlMappingsTable.kt:15)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2$1.invoke(MySqlConnectionProvider.kt:24)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2$1.invoke(MySqlConnectionProvider.kt:14)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$inTopLevelTransaction$1.invoke(ThreadLocalTransactionManager.kt:170)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$inTopLevelTransaction$2.invoke(ThreadLocalTransactionManager.kt:211)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.keepAndRestoreTransactionRefAfterRun(ThreadLocalTransactionManager.kt:219)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.inTopLevelTransaction(ThreadLocalTransactionManager.kt:210)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt$transaction$1.invoke(ThreadLocalTransactionManager.kt:148)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.keepAndRestoreTransactionRefAfterRun(ThreadLocalTransactionManager.kt:219)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.transaction(ThreadLocalTransactionManager.kt:120)\n\tat org.jetbrains.exposed.sql.transactions.ThreadLocalTransactionManagerKt.transaction(ThreadLocalTransactionManager.kt:118)\n\tat org.nmccarra1.url.shortener.dao.MySqlConnectionProvider$dbQuery$2.invokeSuspend(MySqlConnectionProvider.kt:23)\n\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:56)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:738)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)\n\tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.PRIMARY_KEY_4 ON PUBLIC.URL_MAPPINGS(ID) VALUES 4\"; SQL statement:\nINSERT INTO URL_MAPPINGS (CREATED_AT, ID, URL) VALUES (?, ?, ?) [23505-199]\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:457)\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:427)\n\tat org.h2.message.DbException.get(DbException.java:205)\n\tat org.h2.message.DbException.get(DbException.java:181)\n\tat org.h2.index.BaseIndex.getDuplicateKeyException(BaseIndex.java:103)\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:220)\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:196)\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:546)\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:180)\n\tat org.h2.command.dml.Insert.update(Insert.java:132)\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:133)\n\tat org.h2.command.Command.executeUpdate(Command.java:267)\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:200)\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:154)\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n\tat org.jetbrains.exposed.sql.statements.jdbc.JdbcPreparedStatementImpl.executeUpdate(JdbcPreparedStatementImpl.kt:23)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.execInsertFunction(InsertStatement.kt:109)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.executeInternal(InsertStatement.kt:115)\n\tat org.jetbrains.exposed.sql.statements.InsertStatement.executeInternal(InsertStatement.kt:14)\n\tat org.jetbrains.exposed.sql.statements.Statement.executeIn$exposed_core(Statement.kt:61)\n\t... 23 common frames omitted\n","appVersion":"MISSING_APP_VERSION"}
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
